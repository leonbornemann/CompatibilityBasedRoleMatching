package de.hpi.role_matching.ditto

import java.io.File
import scala.io.Source

object TargetPrecisionEvaluation extends App {
  println(DittoResultLine.fromJsonString("{\"left\": \"COL 2019-11-01 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D0 VAL 16 COL 2019-11-17 VAL \u200C⊥D\u200C COL D1 VAL 1 COL 2019-11-18 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D2 VAL 34 COL 2019-12-22 VAL \u200C⊥D\u200C COL D3 VAL 1 COL 2019-12-23 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D4 VAL 27 COL 2020-01-19 VAL \u200C⊥D\u200C COL D5 VAL 1 COL 2020-01-20 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D6 VAL 27 COL 2020-02-16 VAL \u200C⊥D\u200C COL D7 VAL 1 COL 2020-02-17 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D8 VAL 12 COL 2020-02-29 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D9 VAL 6 COL 2020-03-06 VAL \u200C⊥D\u200C COL D10 VAL 1 COL 2020-03-07 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D11 VAL 6 COL 2020-03-13 VAL \u200C⊥D\u200C COL D12 VAL 1 COL 2020-03-14 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D13 VAL 6 COL 2020-03-20 VAL \u200C⊥D\u200C COL D14 VAL 1 COL 2020-03-21 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D15 VAL 6 COL 2020-03-27 VAL \u200C⊥D\u200C COL D16 VAL 1 COL 2020-03-28 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D17 VAL 6 COL 2020-04-03 VAL \u200C⊥D\u200C COL D18 VAL 1 COL 2020-04-04 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D19 VAL 6 COL 2020-04-10 VAL \u200C⊥D\u200C COL D20 VAL 1 COL 2020-04-11 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D21 VAL 6 COL 2020-04-17 VAL \u200C⊥D\u200C COL D22 VAL 1 COL 2020-04-18 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D23 VAL 1 COL 2020-04-19 VAL \u200C⊥D\u200C COL D24 VAL 1 COL 2020-04-20 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D25 VAL 10\", \"right\": \"COL 2019-11-01 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D0 VAL 16 COL 2019-11-17 VAL \u200C⊥D\u200C COL D1 VAL 1 COL 2019-11-18 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D2 VAL 34 COL 2019-12-22 VAL \u200C⊥D\u200C COL D3 VAL 1 COL 2019-12-23 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D4 VAL 27 COL 2020-01-19 VAL \u200C⊥D\u200C COL D5 VAL 1 COL 2020-01-20 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D6 VAL 27 COL 2020-02-16 VAL \u200C⊥D\u200C COL D7 VAL 1 COL 2020-02-17 VAL {____\\\"Photos\\\":_[]_____\\\"Videos\\\":_[]_____\\\"Audios\\\":_[]__} COL D8 VAL 12 COL 2020-02-29 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D9 VAL 6 COL 2020-03-06 VAL \u200C⊥D\u200C COL D10 VAL 1 COL 2020-03-07 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D11 VAL 6 COL 2020-03-13 VAL \u200C⊥D\u200C COL D12 VAL 1 COL 2020-03-14 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D13 VAL 6 COL 2020-03-20 VAL \u200C⊥D\u200C COL D14 VAL 1 COL 2020-03-21 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D15 VAL 6 COL 2020-03-27 VAL \u200C⊥D\u200C COL D16 VAL 1 COL 2020-03-28 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D17 VAL 6 COL 2020-04-03 VAL \u200C⊥D\u200C COL D18 VAL 1 COL 2020-04-04 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D19 VAL 6 COL 2020-04-10 VAL \u200C⊥D\u200C COL D20 VAL 1 COL 2020-04-11 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D21 VAL 6 COL 2020-04-17 VAL \u200C⊥D\u200C COL D22 VAL 1 COL 2020-04-18 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D23 VAL 1 COL 2020-04-19 VAL \u200C⊥D\u200C COL D24 VAL 1 COL 2020-04-20 VAL {___\\\"Photos\\\":_[]____\\\"Videos\\\":_[]____\\\"Audios\\\":_[]_} COL D25 VAL 10\", \"match\": 1, \"match_confidence\": 0.35505128244460943}"))
  val testFileDir = args(0)
  val resultFileDir = args(1)
  val datasets = args(2).split(",")

  datasets.foreach(ds => {
    val testFile = new File(testFileDir + s"/$ds.txt_test.txt")
    val resultFile = new File(testFileDir + s"/${ds}_result.json")
    val iterable = DittoResultLine.iterableFromJsonObjectPerLineFile(resultFile.getAbsolutePath)
    Source.fromFile(testFile).getLines().foreach(l => {
      assert(iterable.hasNext)
      val correspondingResult = iterable.next()
      //TODO get class label from l
    })

  })

}
